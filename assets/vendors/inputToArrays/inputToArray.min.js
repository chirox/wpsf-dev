!function(e){"use strict";function t(){this.set_defaults=function(){this.key=[],this.array=null,this.element=null,this.val_req=!1,this.elem_key=null},this.set_key=function(t){var r=this;""!==t&&"object"==typeof t&&e.each(t,function(e,t){r.key.push(t)})},this.render_array=function(){var t=this;return e.each(t.key,function(e,r){t.array=t.hook_array(e,r,t.array)}),t.array},this.element_array=function(){var e=this.element.attr(this.elem_key);if(void 0!==e||""!==e||!1!==e){var t=null;if(null!==(t=/\[]/g.exec(e))&&1===t.length&&"[]"===t[0])return!0}return!1},this.get_value=function(){var e=this,t=null;return t=e.element.is("input[type=checkbox]")||e.element.is("input[type=radio]")?!!e.element.is(":checked")&&e.element.val():e.element.is("textarea")?e.element.html():e.element.val(),!0===this.element_array()&&!1!==t?[t]:t},this.set_value=function(e,t,r,n){var a=this.get_value();return null===e[t]&&(e[t]={}),!1!==a&&(e[t][r]=this.key.length-1===n&&!0===this.val_req?a:null),e},this.hook_array=function(t,r,n){void 0===n&&(n=this.array);var a=this;return null===n?(n={})[r]=null:"object"!=typeof n&&"array"!=typeof n||e.each(n,function(e,i){null===i?n=a.set_value(n,e,r,t):"object"!=typeof i&&"array"!=typeof i||(n[e]=a.hook_array(t,r,n[e]))}),n},this.run_regex=function(e){for(var t=/\w+(?!\[)[\w&.\-]+\w+/g,r=null,n=this;null!==(r=t.exec(e));)r.index===t.lastIndex&&t.lastIndex++,n.set_key(r);return!0},this.get=function(e,t,r,n){var a=this;a.element=t,a.val_req=r,a.elem_key=n,this.run_regex(e);var i=this.render_array();return this.set_defaults(),i},this.get_key=function(e){return this.run_regex(e),void 0!==this.key[0]?this.key[0]:null},this.array_merge=function(){var e,t=Array.prototype.slice.call(arguments),r=t.length,n={},a="",i=0,l=0,o=0,s=0,u=Object.prototype.toString,y=!0;for(o=0;o<r;o++)if("[object Array]"!==u.call(t[o])){y=!1;break}if(y){for(y=[],o=0;o<r;o++)y=y.concat(t[o]);return y}for(o=0,s=0;o<r;o++)if(e=t[o],"[object Array]"===u.call(e))for(l=0,i=e.length;l<i;l++)n[s++]=e[l];else for(a in e)e.hasOwnProperty(a)&&(parseInt(a,10)+""===a?n[s++]=e[a]:n[a]=e[a]);return n},this.array_merge_recursive=function(e,t){var r="";if(e&&"[object Array]"===Object.prototype.toString.call(e)&&t&&"[object Array]"===Object.prototype.toString.call(t))for(r in t)e.push(t[r]);else if(e&&e instanceof Object&&t&&t instanceof Object)for(r in t)r in e?"object"==typeof e[r]&&"object"==typeof t?e[r]=this.array_merge_recursive(e[r],t[r]):"array"==typeof e[r]&&"array"==typeof t?e[r]=this.array_merge(e[r],t[r]):e[r]=t[r]:e[r]=t[r];return e},this.set_defaults()}e.fn.inputToArray=function(r){var n={},a=e.extend({key:"name",value:!0},r),i=new t;return this.each(function(){var t=e(this).attr(a.key);if(void 0!==t){var r=i.get(t,e(this),a.value,a.key);n=i.array_merge_recursive(r,n)}}),n},e.fn.inputArrayKey=function(r){return void 0===r&&(r="name"),void 0!==(r=e(this).attr(r))&&(new t).get_key(r)}}(jQuery);